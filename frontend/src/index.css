@tailwind base;
@tailwind components;
@tailwind utilities;

/* Ensure Tailwind `border` utilities use theme border color */
@layer base {
  * { @apply border-border; }
}

/* Light theme: white background, dark blue + grey */
:root {
  /* Base surfaces */
  --background: 210 20% 97%; /* slightly deeper page bg for contrast */
  --foreground: 222.2 47.4% 11.2%; /* near-black text */
  --card: 0 0% 100%;
  --card-foreground: 222.2 47.4% 11.2%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 47.4% 11.2%;

  /* Brand accents (dark blue) */
  --primary: 221 83% 45%; /* dark blue */
  --primary-foreground: 0 0% 100%; /* white */
  --accent: 221 89% 58%; /* blue (slightly lighter) */
  --accent-foreground: 0 0% 100%;

  /* UI accents (greys) */
  --secondary: 220 15% 92%; /* sidebar/panel surface (more contrast) */
  --secondary-foreground: 222.2 47.4% 11.2%;
  --muted: 210 40% 93%; /* slightly deeper */
  --muted-foreground: 215 16.3% 35%; /* darker grey text for readability */
  --destructive: 0 72% 51%;
  --destructive-foreground: 0 0% 100%;
  --border: 213 27% 80%; /* stronger border for separation */
  --input: 213 27% 80%;
  --ring: 221 83% 45%; /* match primary (dark blue) */

  --radius: 0.6rem;
}

/* Status colors for richer button variants */
:root {
  --success: 142 72% 29%;
  --success-foreground: 0 0% 100%;
  --warning: 38 92% 50%;
  --warning-foreground: 222.2 47.4% 11.2%;
  --info: 199 89% 48%;
  --info-foreground: 0 0% 100%;
}

/* Component styles: panels and sidebar links */
@layer components {
  /* Elevated panel with subtle 3D effect */
  .panel-3d { 
    @apply bg-card border border-border rounded-xl shadow-md;
    box-shadow:
      0 1px 3px hsl(0 0% 0% / 0.10),
      0 12px 28px hsl(0 0% 0% / 0.12);
  }
  .dark .panel-3d {
    box-shadow:
      0 1px 2px hsl(0 0% 0% / 0.55),
      0 10px 24px hsl(0 0% 0% / 0.45);
  }
  /* Keep static elevation; no hover lift */

  /* Modern sidebar look */
  .app-sidebar {
    background: linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--muted) / 0.3) 100%);
    @apply backdrop-blur-xl border-border/50;
    box-shadow: inset -1px 0 0 hsl(var(--border));
  }

  .sidebar-link {
    @apply relative rounded-lg px-3 py-2.5 text-sm font-medium text-muted-foreground transition-all duration-200 flex items-center gap-3;
  }
  .sidebar-link:hover { 
    @apply bg-accent/50 text-foreground shadow-sm; 
    transform: translateX(2px);
  }
  .sidebar-link.is-active { 
    @apply bg-primary/10 text-primary shadow-sm; 
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), inset 0 1px 0 0 hsl(var(--primary) / 0.1);
  }
  .sidebar-link::before {
    content: "";
    position: absolute;
    left: -12px;
    top: 20%;
    bottom: 20%;
    width: 3px;
    border-radius: 9999px;
    background: transparent;
    transform: scaleY(0);
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  .sidebar-link:hover::before { 
    background: hsl(var(--accent-foreground) / 0.3); 
    transform: scaleY(0.7); 
  }
  .sidebar-link.is-active::before { 
    background: hsl(var(--primary)); 
    transform: scaleY(1); 
  }
  .sidebar-link svg {
    @apply transition-transform duration-200;
  }
  .sidebar-link:hover svg {
    transform: scale(1.1);
  }
}

/* Dark theme overrides (applied when .dark class is on html) */
.dark {
  /* Base surfaces */
  --background: 220 15% 6%; /* near black */
  --foreground: 210 40% 98%; /* near white */
  --card: 220 15% 11%; /* distinct panel surface */
  --card-foreground: 210 40% 98%;
  --popover: 220 15% 11%;
  --popover-foreground: 210 40% 98%;

  /* Brand accents */
  --primary: 213 90% 56%; /* blue */
  --primary-foreground: 210 40% 98%;
  --accent: 213 90% 56%; /* blue (match primary) */
  --accent-foreground: 210 40% 98%;

  /* UI accents */
  --secondary: 220 14% 13%; /* sidebar/panel-tier surface */
  --secondary-foreground: 210 40% 98%;
  --muted: 220 12% 18%;
  --muted-foreground: 215 20% 70%;
  --destructive: 0 84% 62%;
  --destructive-foreground: 210 40% 98%;
  --border: 220 14% 22%;
  --input: 220 14% 22%;
  --ring: 213 90% 56%; /* match primary (blue) */

  --radius: 0.6rem;

  /* Status colors */
  --success: 142 70% 40%;
  --success-foreground: 210 40% 98%;
  --warning: 48 96% 53%;
  --warning-foreground: 222.2 47.4% 11.2%;
  --info: 199 95% 62%;
  --info-foreground: 210 40% 98%;
}

html, body, #root { height: 100%; }
body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Subtle card & element transitions */
@layer components {
  .card-transition { @apply transition-colors duration-200; }
}

/* Minimal scrollbars: transparent track, no buttons, visible thumb only */
/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--muted-foreground) / 0.35) transparent;
}
/* WebKit */
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background-color: hsl(var(--muted-foreground) / 0.35);
  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
*::-webkit-scrollbar-button {
  display: none;
  width: 0;
  height: 0;
}

/* Electron window controls */
.drag-region {
  -webkit-app-region: drag;
}

.no-drag {
  -webkit-app-region: no-drag;
}
